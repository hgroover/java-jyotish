BEGIN {
  lasth=0;
  lasta=0;
  /* Initialize associative array used in motionprefix() using the same format provided on input */
  /* No longer used, instead we get 4 additional fields from input: */
  /*  house aspect source-align dest-align xoffset yoffset data... */
  /*  source-align is L or R to align origin on left or right side of source (origin) object */
  /*  dest-align aligns destination object */
  /*  source-align, dest-align, xoffset and yoffset are passed on to output as-is separated by space   */
  m["01","03"] = "0 2";
  m["01","04"] = "0 2";
  m["01","05"] = "-1 5";
  m["01","07"] = "-3 3";
  m["01","08"] = "1 1";
  m["01","09"] = "1 1";
  m["01","10"] = "1 -1";

  m["02","03"] = "0 -1";
  m["02","04"] = "0 1";
  m["02","05"] = "1 -2";
  m["02","07"] = "1 -2";
  m["02","08"] = "1 -1";
  m["02","09"] = "1 -2";
  m["02","10"] = "0 -2";

  m["03","03"] = "0 1";
  m["03","04"] = "0 1";
  m["03","05"] = "4 4";
  m["03","07"] = "1 -1";
  m["03","08"] = "1 -1";
  m["03","09"] = "1 -1";
  m["03","10"] = "1 -1";

  m["04","03"] = "1 0";
  m["04","04"] = "1 0";
  m["04","05"] = "1 0";
  m["04","07"] = "0 1";
  m["04","08"] = "1 -1";
  m["04","09"] = "1 -1";
  m["04","10"] = "1 -1";

  m["05","03"] = "0 1";
  m["05","04"] = "1 -1";
  m["05","05"] = "0 -2";
  m["05","07"] = "1 -1";
  m["05","08"] = "1 -1";
  m["05","09"] = "1 -1";
  m["05","10"] = "0 -1";

  m["06","03"] = "1 -1";
  m["06","04"] = "0 -1";
  m["06","05"] = "0 -1";
  m["06","07"] = "0 -1";
  m["06","08"] = "0 -1";
  m["06","09"] = "0 -1";
  m["06","10"] = "0 1";

  m["07","03"] = "0 1";
  m["07","04"] = "0 -1";
  m["07","05"] = "0 -1";
  m["07","07"] = "0 -1";
  m["07","08"] = "0 -1";
  m["07","09"] = "0 1";
  m["07","10"] = "0 1";

  m["08","03"] = "0 -3";
  m["08","04"] = "0 -2";
  m["08","05"] = "0 -2";
  m["08","07"] = "0 -2";
  m["08","08"] = "0 -2";
  m["08","09"] = "0 1";
  m["08","10"] = "0 -1";

  m["09","03"] = "0 -3";
  m["09","04"] = "0 -3";
  m["09","05"] = "0 -3";
  m["09","07"] = "0 -1";
  m["09","08"] = "0 -1";
  m["09","09"] = "0 -1";
  m["09","10"] = "0 -1";

  m["10","03"] = "0 -3";
  m["10","04"] = "0 -3";
  m["10","05"] = "0 -2";
  m["10","07"] = "0 2";
  m["10","08"] = "0 1";
  m["10","09"] = "0 1";
  m["10","10"] = "0 1";

  m["11","03"] = "0 -2";
  m["11","04"] = "0 -2";
  m["11","05"] = "0 1";
  m["11","07"] = "0 1";
  m["11","08"] = "0 1";
  m["11","09"] = "0 2";
  m["11","10"] = "0 -1";

  m["12","03"] = "0 -2";
  m["12","04"] = "0 -1";
  m["12","05"] = "0 1";
  m["12","07"] = "0 1";
  m["12","08"] = "0 1";
  m["12","09"] = "0 -2";
  m["12","10"] = "0 -2";

}
function motionprefix(h,a) {
  /* gawk uses associative arrays with a single key formed using RECORDSEP */
  if ((h,a) in m)
  {
	return m[h,a];
  }
  return "0 0";
}
{ if ($1!=lasth)
  {
    if (lasth!=0) printf( "},\n" );
    lasth=$1;
    lasta=0;
    printf( "{ /* h%02d */\n", $1 );
  }
  if ($2<3 || $2>10)
  {
    printf( "/*** WARNING: invalid aspect number %d ***/\n", $2 );
    next;
  }
  if (lasta>0) while (lasta < $2-1)
  {
    printf( "\t\"\",	/* a%d not used */\n", lasta+1 );
    lasta++;
  }
  printf( "\t\"%s %s %s %s L %s\",	/* a%d (%s,%s) */\n", $3, $4, $5, $6, substr($7,2), $2, $1, $2);
  lasta = $2;
}
END { if (lasth!=0) printf( "}\n" ); }

